from marshmallow import Schema, fields, validate

class PropertySchema(Schema):
    id = fields.Int(dump_only=True)
    title = fields.Str(required=True, validate=validate.Length(min=1, max=200))
    description = fields.Str()
    address = fields.Str(required=True)
    city = fields.Str(required=True, validate=validate.Length(min=1, max=100))
    state = fields.Str(required=True, validate=validate.Length(min=1, max=50))
    zip_code = fields.Str(required=True, validate=validate.Length(min=1, max=20))
    property_type = fields.Str(required=True, validate=validate.OneOf(['apartment', 'house', 'condo', 'townhouse']))
    status = fields.Str(validate=validate.OneOf(['available', 'occupied', 'maintenance', 'unavailable']))
    monthly_rent = fields.Decimal(required=True, validate=validate.Range(min=0))
    security_deposit = fields.Decimal(validate=validate.Range(min=0))
    bedrooms = fields.Int(validate=validate.Range(min=0))
    bathrooms = fields.Decimal(validate=validate.Range(min=0))
    square_feet = fields.Int(validate=validate.Range(min=0))
    amenities = fields.Str()
    images = fields.List(fields.Dict())
    landlord_id = fields.Int(dump_only=True)
    tenant_id = fields.Int()
    lease_start = fields.Date()
    lease_end = fields.Date()
    created_at = fields.DateTime(dump_only=True)

class PropertyCreateSchema(Schema):
    title = fields.Str(required=True, validate=validate.Length(min=1, max=200))
    description = fields.Str()
    address = fields.Str(required=True)
    city = fields.Str(required=True, validate=validate.Length(min=1, max=100))
    state = fields.Str(required=True, validate=validate.Length(min=1, max=50))
    zip_code = fields.Str(required=True, validate=validate.Length(min=1, max=20))
    property_type = fields.Str(required=True, validate=validate.OneOf(['apartment', 'house', 'condo', 'townhouse']))
    monthly_rent = fields.Decimal(required=True, validate=validate.Range(min=0))
    security_deposit = fields.Decimal(validate=validate.Range(min=0))
    bedrooms = fields.Int(validate=validate.Range(min=0))
    bathrooms = fields.Decimal(validate=validate.Range(min=0))
    square_feet = fields.Int(validate=validate.Range(min=0))
    amenities = fields.Str()